jQuery(document).ready(function(n){n.CoaStickyNote=function(i,r){var st={resizable:!1,defaultTheme:{text:"Yellow",value:"sticky-note-yellow-theme"},availableThemes:[],notePosition:{top:"10px",left:"10px"},noteDimension:{width:"235px",height:"200px"},noteText:"New note box!",noteTextMaxLength:0,noteHeaderText:"New note!",noteHeaderTextMaxLength:0,deleteLinkText:"X",optionsLinkText:"",startZIndex:10,sleeping:!1,zIndex:1,beforeCreatingNoteBox:t,onNoteBoxCreated:t,onNoteBoxHeaderUpdate:t,onNoteBoxTextUpdate:t,onNoteBoxDelete:t,onNoteBoxResizeStop:t,onNoteBoxDraggingStop:t,onMovingNoteBoxOnTop:t,onThemeSelectionChange:t},h="each-sticky-note-outer",a="each-sticky-note-options",v="each-sticky-note-delete",k="each-sticky-note-header",d="each-sticky-note-options-control",g="each-sticky-note-text-box",p="each-sticky-note-themebox",e="each-sticky-note-outer-sleeping",o="coaStickyNote",u=this,f;u.settings={};f=n(i);u.init=function(){u.settings=n.extend(!0,{},st,r);f.dblclick(function(){rt()||b(f)})};u.loadExistingNotes=function(n){if(n!=null&&n.length>0)for(var t=0;t<n.length;t++)b(f,n[t])};u.loadExistingNote=function(n){n!=null&&b(f,n)};u.destroy=function(){f.find("."+h).each(function(){n(this).find("."+k).each(function(){n(this).find("input").each(function(){c(n(this))});c(n(this))});n(this).find("."+v).each(function(){c(n(this))});n(this).find("."+a).each(function(){n(this).find("."+d).each(function(){c(n(this))});n(this).find("."+p).each(function(){n(this).find("select").each(function(){c(n(this))});c(n(this))});c(n(this))});n(this).find("."+g).each(function(){n(this).find("textarea").each(function(){c(n(this))});c(n(this))});c(n(this));n(this).removeData();n(this).draggable("destroy");n(this).resizable("destroy")});f.unbind();f.removeData()};u.sleepAll=function(){f.hasClass(e)||(f.addClass(e),f.find("."+h).addClass(e),f.find("."+h).each(function(){tt(n(this))}))};u.wakeupAll=function(){f.hasClass(e)&&f.removeClass(e);f.find("."+e).removeClass(e);f.find("."+h).each(function(){it(n(this))})};u.sleep=function(n){n.hasClass(e)||(n.addClass(e),tt(n))};u.wakeup=function(n){n.hasClass(e)&&(n.removeClass(e),it(n));n.parent().hasClass(e)&&n.parent().removeClass(e)};u.getNoteBoxById=function(n){return nt(n,null)};u.getNoteBoxByIndex=function(n){return nt(null,n)};var y=function(n,t){return n.height()-t.height()-3},nt=function(t,i){var r=null;return f.find("."+h).each(function(){if(r==null){var u=n(this).data(o);(t==null&&u.index==i||i==null&&u.id==t)&&(r=n(this))}}),r},tt=function(n){n.draggable("disable");n.resizable("disable")},it=function(n){n.draggable("enable");n.resizable("enable")},s=function(n){return n.hasClass(e)||n.data(o).settings.sleeping||rt()?!0:!1},rt=function(){return f.hasClass(e)?!0:!1},ut=function(){var t=0;return f.find("."+h).each(function(){var i=n(this).data(o);t<i.index&&(t=i.index)}),t+1},ht=function(t){var i=!0;return f.find("."+h).each(function(){var r=n(this).data(o);t==r.index&&(i=!1)}),i},ft=function(){var t=0;return f.find("."+h).each(function(){var r=n(this).data(o),i=parseInt(r.settings.zIndex,10);t<i&&(t=i)}),t>u.settings.zIndex?t+1:u.settings.zIndex+1},ct=function(n){n.css({left:10,top:20,position:"absolute"})},l=function(n){return n==null||n==""?!1:!0},c=function(n){n.remove();n.unbind()},lt=function(n){l(n.settings.defaultTheme)&&l(n.settings.defaultTheme.value)||(n.settings.defaultTheme=u.settings.defaultTheme);l(n.settings.noteDimension)||(n.settings.noteDimension=u.settings.noteDimension);l(n.settings.noteDimension.width)||(n.settings.noteDimension.width=u.settings.noteDimension.width);l(n.settings.noteDimension.height)||(n.settings.noteDimension.height=u.settings.noteDimension.height);l(n.settings.notePosition)||(n.settings.notePosition=u.settings.notePosition);l(n.settings.notePosition.top)||(n.settings.notePosition.top=u.settings.notePosition.top);l(n.settings.notePosition.left)||(n.settings.notePosition.left=u.settings.notePosition.left);(n.settings.availableThemes==null||n.settings.availableThemes.length==0)&&(n.settings.availableThemes=[u.defaultTheme])},et=function(t,i){var r=ft();n(t).css("z-index",r);n(t).data(o).settings.zIndex=r;i.settings.onMovingNoteBoxOnTop(i,n(t))},w=function(n){var t=n==null?"":n.replace(/\r\n/g,"<br>");return t.replace(/\n/g,"<br>")},at=function(n){return n==null?"":n.replace(/<br>/g,"\n")},ot=function(t,i,r,u,f){var h=u.settings.noteHeaderText,o,s,e;u.settings.noteHeaderText=r.val();o=u.settings.onNoteBoxHeaderUpdate(u,t);o==!1&&(u.settings.noteHeaderText=h);f.html(u.settings.noteHeaderText);t.find("."+v+", ."+a).removeClass("hidden-item");s=n("textarea",t)[0];e=y(t,i);e>0&&n(s).height(e+"px")},vt=function(n,t,i,r,u){var o=i.settings.noteText,e,f;i.settings.noteText=u.val();e=i.settings.onNoteBoxTextUpdate(i,n);e==!1&&(i.settings.noteText=o);f=y(n,t);f>0&&r.height(f+"px");r.html(w(i.settings.noteText));i.settings.resizable&&n.resizable("option","alsoResize",r)},b=function(t,i){var r={},e,c,l,nt,b,tt,rt,it;if(i==null?(r={settings:n.extend(!0,{},u.settings),index:ut()},r.id=r.index):(r.settings=n.extend(!0,{},u.settings),r.settings=n.extend(!0,r.settings,i.settings),i.id!=null&&(r.id=i.id),r.index=i.index>=0&&ht(i.index)?i.index:ut(),lt(r)),i==null&&(r.settings.zIndex=ft()),e=n("<div class='"+h+" "+r.settings.defaultTheme.value+"'><\/div>"),e.css({zIndex:r.settings.zIndex,top:r.settings.notePosition.top,left:r.settings.notePosition.left,width:r.settings.noteDimension.width,height:r.settings.noteDimension.height}),e.dblclick(function(n){n.stopPropagation()}),e.click(function(n){s(e)||(et(this,r),n.stopPropagation())}),c=n("<div class='"+k+"'><\/div>").html(r.settings.noteHeaderText),c.dblclick(function(){if(!s(e)&&!(c.find("input").length>0)){var i=n(this),t=n('<input type="text" />').val(i.html());r.settings.noteHeaderTextMaxLength>0&&t.attr("maxlength",r.settings.noteHeaderTextMaxLength);t.width(i.parent().width()-6+"px");i.html("");i.append(t);t.focus();e.find("."+v+", ."+a).addClass("hidden-item");t.blur(function(n){s(e)||(ot(e,c,t,r,i),n.stopPropagation())});t.keyup(function(n){s(e)||(n=n||window.event,n.keyCode==13&&(ot(e,c,t,r,i),n.stopPropagation()),(n.which==27||n.keyCode==27)&&(e.find("."+v+", ."+a).removeClass("hidden-item"),i.html(r.settings.noteHeaderText),n.stopPropagation()))});t.click(function(n){n.stopPropagation()})}}),l=n("<div class='"+g+"'>"+w(r.settings.noteText)+"<\/div>"),l.dblclick(function(){var u,t,i;s(e)||l.find("textarea").length>0||(u=n(this),t=n("<textarea><\/textarea>").val(at(u.html())),r.settings.noteTextMaxLength>0&&t.attr("maxlength",r.settings.noteTextMaxLength),n(this).html(""),n(this).append(t),t.focus(),t.parent().css("height","auto"),i=y(e,c),i>0&&t.height(i+"px"),r.settings.resizable&&e.resizable("option","alsoResize",t),t.blur(function(t){s(e)||(vt(e,c,r,l,n(this)),t.stopPropagation())}),t.keyup(function(n){if(!s(e)&&(n=n||window.event,n.which==27||n.keyCode==27)){var t=y(e,c);t>0&&l.height(t+"px");l.html(w(r.settings.noteText));r.settings.resizable&&e.resizable("option","alsoResize",l);n.stopPropagation()}}))}),nt=n("<div class='"+v+"'>"+r.settings.deleteLinkText+"<\/div>"),nt.click(function(){if(!s(e)){var t=r.settings.onNoteBoxDelete(r,e);t!=!1&&n(this).parent().remove()}}),b={},r.settings.availableThemes.length!=null&&r.settings.availableThemes.length>0&&r.settings.availableThemes[0]!=null&&(b=n("<div class='"+a+"'>"+r.settings.optionsLinkText+"<\/div>"),tt=n("<div class='"+d+"'>"+r.settings.optionsLinkText+"<\/div>"),b.append(tt),tt.click(function(t){var o,u;if(!s(e)&&(o=!1,b.find("."+p).each(function(){o=!0;n(this).remove()}),!o)){f.find("."+p).each(function(){n(this).remove()});var c=n("<div class='"+p+"'><\/div>"),i=n("<select><\/select>"),l="";for(u=0;u<r.settings.availableThemes.length;u++)l+="<option value='"+r.settings.availableThemes[u].value+"'>"+r.settings.availableThemes[u].text+"<\/option>";i.append(l);b.append(c.append(i));i.val(r.settings.defaultTheme.value);i.focus();ct(c);i.change(function(){if(!s(e)){r.settings.defaultTheme.value=n(this).val();r.settings.defaultTheme.text=n("option:selected",n(this)).text();r.settings.onThemeSelectionChange(r,e);e.removeAttr("class");e.addClass(h+" "+n(this).val());t.stopPropagation()}});i.blur(function(t){s(e)||(n(this).parent().remove(),t.stopPropagation())});t.stopPropagation()}})),e.append(nt).append(b).append(c).append(l),i!=null||(rt=r.settings.beforeCreatingNoteBox(r,e),rt!=!1)){if(t.append(e),it=y(e,c),it>0&&l.height(it+"px"),e.draggable({scroll:!1,containment:f,start:function(){et(this,r)},stop:function(n,t){t.helper.data(o).settings.notePosition.left=t.position.left+"px";t.helper.data(o).settings.notePosition.top=t.position.top+"px";r.settings.onNoteBoxDraggingStop(r,e)}}),r.settings.resizable&&e.resizable({alsoResize:l,minHeight:"100",minWidth:"200",stop:function(n,t){t.helper.data(o).settings.notePosition.left=t.position.left+"px";t.helper.data(o).settings.notePosition.top=t.position.top+"px";t.helper.data(o).settings.noteDimension.width=t.size.width+"px";t.helper.data(o).settings.noteDimension.height=t.size.height+"px";r.settings.onNoteBoxResizeStop(r,e)}}),i==null)r.settings.onNoteBoxCreated(r,e);e.data(o,r)}};u.init()};var t=function(){};n.fn.coaStickyNote=function(t){return this.each(function(){if(undefined==n(this).data("coaStickyNote")){var i=new n.CoaStickyNote(this,t);n(this).data("coaStickyNote",i)}})}});
/*
//# sourceMappingURL=jquery.stickynote.min.js.map
*/